{% extends "layout.html" %}
{% block content %}
<h2>Meetings</h2>

<details>
  <summary>New Meeting</summary>
  <form method="post" style="display:flex; gap:.5rem; align-items:end; flex-wrap:wrap;">
    <label>Title <input type="text" name="title" required></label>
    <label>Date <input type="date" name="meeting_date" required></label>
<button type="submit"><i data-lucide="plus"></i> Create</button>
  </form>
</details>

<div class="table-wrap"><table class="compact">
  <thead>
    <tr><th>Title</th><th>Date</th><th>Members</th><th>Actions</th></tr>
  </thead>
  <tbody>
  {% for m in meetings %}
    <tr>
      <td><a href="{{ url_for('meeting_detail', id=m.id) }}">{{ m.title }}</a></td>
      <td>{{ m.meeting_date }}</td>
      <td><a href="{{ url_for('meeting_detail', id=m.id) }}">{{ m.members | length }} member{{ "s" if m.members | length != 1 }}</a></td>
      <td>
        <form method="post" action="{{ url_for('meeting_delete', id=m.id) }}" onsubmit="return confirm('Delete?')">
          <button type="submit" class="outline secondary btn-del"><i data-lucide="trash-2"></i></button>
        </form>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table></div>
{% endblock %}
